<?xml version="1.0" encoding="UTF-8"?>
<document>
	<simulation name="mySim" outputfolder="../../Simulations" log="DEBUG"
						comment="this is a file for testing purposes only.">
		
		<timer stepSize="1.0" endOfSimulation="30.0" />
		
		<speciesLib>
			<!-- species/species library The species library contains all agent species 
				in the simulations. This may include microbial species, plasmid and vector 
				species, particle species etc. Species states are states that are in principal 
				identical for all agents of that species. However note that iDynoMiCS 2.0 
				does allow you to overwrite states on agent level. Thus if a state is defined 
				both on species level and on agent level, the agent state will be used in 
				the simulation. small test -->
			<species name="probiotic">
				<aspect name="reactions" type="PRIMARY" class="LinkedList" >
				
				<!-- the first reaction about the probiotic growth-->
					<item type="PRIMARY" class="Reaction">
						<reaction name="probiotic growth">
							<expression value="glucose * K1 * mass">
							         <constant name="K1" value="0.5" />
							<!-- glucose consumption rate -->	
							</expression>
							<stoichiometric component="glucose" coefficient="-1.0" />
							<stoichiometric component="probiotic" coefficient="0.495" />
							<stoichiometric component="acid" coefficient="0.505" />
						</reaction>
					</item>
					
					
					
					
					<!-- the second reaction about the probiotic decay-->
					<item type="PRIMARY" class="Reaction">
						<reaction name="probiotic decay">
							<expression value="mass*K2">
								<constant name="K2" value="0.1" />
							</expression>
							<stoichiometric component="probiotic" coefficient="-1.0" /> 
						</reaction>
					</item>
					<!-- Reaction is over here-->
					
					
					
					
				</aspect>
				<aspect name="pigment" type="PRIMARY" class="String" value="GREEN" />
				<!-- this has not been made yet, use a static growthrate for now -->
				<aspect name="specGrowthRate" type="PRIMARY" class="Double" value="0.08" />
				<speciesModule name="coccoid" />
				<speciesModule name="stochasticMover" />
			</species>
			<species name="coccoid">
				<aspect name="surfaces"			type="CALCULATED"	class="AgentSurfaces"			input="body"		  />
				<aspect name="morphology" 		type="PRIMARY" class="String" 		value="coccoid" />
				<aspect name="volume" 			type="CALCULATED" 	class="StateExpression" 		input="mass/density" />
				<aspect name="radius" 			type="CALCULATED" 	class="CoccoidRadius" 			input="volume" />
				<aspect name="growth" 			type="EVENT" 		class="SimpleGrowth"  	 		input="mass,specGrowthRate" 	 />
				<aspect name="divide" 			type="EVENT" 		class="CoccoidDivision"			input="mass,radius,body" 	 />
				<aspect name="updateBody" 		type="EVENT" 		class="UpdateBody" 				input="body,radius,length" 	 />
			</species>		
			<species name="stochasticMover">
				<aspect name="stochasticStep" type="PRIMARY" class="Double" value="0.1" />
				<aspect name="stochasticMove" type="EVENT" class="StochasticMove"  input="body,stochasticStep" />
			</species>
			
			
			
				<species name="pathogen">
				<aspect name="reactions" type="PRIMARY" class="LinkedList" >
				
				<!-- the first reaction about the pathogen growth-->
					<item type="PRIMARY" class="Reaction">
						<reaction name="pathogen growth">
							<expression value="glucose * K3 * mass">
							         <constant name="K3" value="0.5" />
							<!-- glucose consumption rate -->	
							</expression>
							<stoichiometric component="glucose" coefficient="-1.0" />
							<stoichiometric component="pathogen" coefficient="1.0" />
						</reaction>
					</item>
					
					
					
					
					<!-- the second reaction about the pathogen decay-->
					<item type="PRIMARY" class="Reaction">
						<reaction name="pathogen decay">
							<expression value="mass*K4">
								<constant name="K4" value="0.05" />
							</expression>
							<stoichiometric component="pathogen" coefficient="-1.0" /> 
						</reaction>
					</item>
					<!-- Reaction is over here-->
					
					
					
					
				</aspect>
				<aspect name="pigment" type="PRIMARY" class="String" value="BLUE" />
				<!-- this has not been made yet, use a static growthrate for now -->
				<aspect name="specGrowthRate" type="PRIMARY" class="Double" value="0.5" />
				<speciesModule name="coccoid" />
				<speciesModule name="stochasticMover" />
			</species>
			<species name="coccoid">
				<aspect name="surfaces"			type="CALCULATED"	class="AgentSurfaces"			input="body"		  />
				<aspect name="morphology" 		type="PRIMARY" class="String" 		value="coccoid" />
				<aspect name="volume" 			type="CALCULATED" 	class="StateExpression" 		input="mass/density" />
				<aspect name="radius" 			type="CALCULATED" 	class="CoccoidRadius" 			input="volume" />
				<aspect name="growth" 			type="EVENT" 		class="SimpleGrowth"  	 		input="mass,specGrowthRate" 	 />
				<aspect name="divide" 			type="EVENT" 		class="CoccoidDivision"			input="mass,radius,body" 	 />
				<aspect name="updateBody" 		type="EVENT" 		class="UpdateBody" 				input="body,radius,length" 	 />
			</species>		
			<species name="stochasticMover">
				<aspect name="stochasticStep" type="PRIMARY" class="Double" value="0.1" />
				<aspect name="stochasticMove" type="EVENT" class="StochasticMove"  input="body,stochasticStep" />
			</species>
		
		</speciesLib>
		
		
		
		
		
		
		
		<!-- the first compartment-->
		<compartment name="biofilm compartment">
			<shape class="Rectangle">
				<dimension name="X" isCyclic="TRUE">
					<extreme name="max" position="25.0"/>
				</dimension> 
				<dimension name="Y" isCyclic="TRUE">
					<extreme name="max" position="25.0"/>
				</dimension> 
			</shape>
			<solutes>
				<solute name="glucose" concentration="1.0" />
				<solute name="acid" concentration="0" />
			</solutes>
			<reactions>
				<reaction name="slowInflow">
					<expression value="1.0 * inflow">
						<constant name="inflow" value="0.04" />
					</expression>
					<stoichiometric component="glucose" coefficient="1.0" />
				</reaction>
			</reactions>
				
			<agents>			
				<agent>
					<aspect name="volumeDistribution" type="PRIMARY" class="HashMap">
					</aspect>				
					<aspect name="species" type="PRIMARY" class="String" value="probiotic" />
					<aspect name="mass" type="PRIMARY" class="Double" value="0.5" />
					<aspect name="density" type="PRIMARY" class="Double" value="1" />
					<aspect name="#isLocated" type="PRIMARY" class="Boolean" value="true" />
					<aspect name="pigment" type="PRIMARY" class="String" value="GREEN" />
					<!--<state name="filialLinker" type="PRIMARY" class="Boolean" value="true" /> -->
					<aspect name="body" type="PRIMARY" class="Body">
						<point position="1.0, 12.0" />
					</aspect>
				</agent>
				
				<agent>
					<aspect name="species" type="PRIMARY" class="String" value="pathogen" />
					<aspect name="mass" type="PRIMARY" class="Double" value="0.6" />
					<aspect name="density" type="PRIMARY" class="Double" value="1" />
					<aspect name="#isLocated" type="PRIMARY" class="Boolean" value="true" />
					<aspect name="pigment" type="PRIMARY" class="String" value="BLUE" />
					<aspect name="body" type="PRIMARY" class="Body">
						<point position="1.0, 5.3" />
					</aspect>
				</agent>			 
			</agents>
			
		
			
			
			<processManagers>
				<process name="svgWriter" class="WriteAgentsSvg"  priority="-3"
					firstStep="0.0" >
					<aspect name="prefix" type="PRIMARY" class="String" value="out_glucose" />
					<aspect name="maxConcentration" type="PRIMARY" class="Double" value="2.0" />
						<!-- <what is this mean>  -->
					<aspect name="solute" type="PRIMARY" class="String" value="glucose" />
					<aspect name="timerStepSize" type="PRIMARY" class="Double" value="1.0" />
					    <!-- <what is this mean>  -->
				</process>				
				<!-- <process name="agentGrowth" class="AgentGrowth"  priority="-0"
					firstStep="0.0"  />  -->
				<!-- <process name="agentMove" class="AgentStochasticMove"
					 priority="-1" firstStep="0.0"  /> -->
					 
					 
					 
					 
				<process name="agentRelax" class="AgentRelaxation"  priority="-2"
					firstStep="0.0"  timerStepSize="0.5">
					<aspect name="maxMovement" type="PRIMARY" class="Double" value="0.05" />
					<aspect name="relaxationMethod" type="PRIMARY" class="String" value="EULER" />
				</process>
				
				
				
				
				<process name="solveDiffusionTransient" class="SolveDiffusionTransient"  priority="-1"
					firstStep="0.0" timerStepSize="0.5">
					<aspect name="solutes" type="PRIMARY" class="String[]" value="glucose,acid" /> <!--  init -->
					<aspect name="timerStepSize" type="PRIMARY" class="Double" value="1.0" />
				</process>
				
				
				
			</processManagers>
		</compartment>
	</simulation>
</document>